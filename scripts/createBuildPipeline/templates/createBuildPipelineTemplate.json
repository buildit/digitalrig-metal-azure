{
    "buildNumberFormat": "$(date:yyyyMMdd)$(rev:.r)",
    "jobAuthorizationScope": "projectCollection",
    "process": {
      "phases": [
        {
          "steps": [
            {
              "environment": {},
              "enabled": true,
              "continueOnError": false,
              "alwaysRun": false,
              "displayName": "Azure Deployment:Create Azure Container Registry",
              "timeoutInMinutes": 0,
              "condition": "succeeded()",
              "task": {
                "id": "94a74903-f93f-4075-884f-dc11f34058b4",
                "versionSpec": "2.*",
                "definitionType": "task"
              },
              "inputs": {
                "ConnectedServiceName": "${serviceConnectionId}",
                "action": "Create Or Update Resource Group",
                "resourceGroupName": "${groupName}",
                "location": "${location}",
                "templateLocation": "URL of the file",
                "csmFileLink": "https://raw.githubusercontent.com/Microsoft/devops-project-samples/057f6cc268a62922d012067d069d58684e967d0a/armtemplates/webapp-containers/containerRegistry-template.json",
                "csmParametersFileLink": "",
                "csmFile": "",
                "csmParametersFile": "",
                "overrideParameters": "-registryName \"${registryName}\" -registryLocation \"${location}\" -registrySku \"${registrySku}\"",
                "deploymentMode": "Incremental",
                "enableDeploymentPrerequisites": "None",
                "deploymentGroupEndpoint": "",
                "project": "",
                "deploymentGroupName": "",
                "copyAzureVMTags": "true",
                "runAgentServiceAsUser": "false",
                "userName": "",
                "password": "",
                "outputVariable": "",
                "deploymentOutputs": ""
              }
            },
            {
              "environment": {},
              "enabled": true,
              "continueOnError": false,
              "alwaysRun": false,
              "displayName": "Build an image",
              "timeoutInMinutes": 0,
              "task": {
                "id": "e28912f1-0114-4464-802a-a3a35437fd16",
                "versionSpec": "1.*",
                "definitionType": "task"
              },
              "inputs": {
                "containerregistrytype": "Azure Container Registry",
                "dockerRegistryEndpoint": "",
                "azureSubscriptionEndpoint": "${serviceConnectionId}",
                "azureContainerRegistry": "${registryAddress}",
                "command": "Build an image",
                "dockerFile": "**/Dockerfile",
                "arguments": "",
                "useDefaultContext": "true",
                "buildContext": "",
                "pushMultipleImages": "false",
                "tagMultipleImages": "false",
                "imageName": "${imageName}:$(Build.BuildId)",
                "imageNamesPath": "",
                "qualifyImageName": "true",
                "includeSourceTags": "false",
                "includeLatestTag": "false",
                "imageDigestFile": "",
                "containerName": "",
                "ports": "",
                "volumes": "",
                "envVars": "",
                "workingDirectory": "",
                "entrypointOverride": "",
                "containerCommand": "",
                "runInBackground": "true",
                "restartPolicy": "no",
                "maxRestartRetries": "",
                "dockerHostEndpoint": "",
                "enforceDockerNamingConvention": "true",
                "memoryLimit": ""
              }
            },
            {
              "environment": {},
              "enabled": true,
              "continueOnError": false,
              "alwaysRun": false,
              "displayName": "Push an image",
              "timeoutInMinutes": 0,
              "task": {
                "id": "e28912f1-0114-4464-802a-a3a35437fd16",
                "versionSpec": "1.*",
                "definitionType": "task"
              },
              "inputs": {
                "containerregistrytype": "Azure Container Registry",
                "dockerRegistryEndpoint": "",
                "azureSubscriptionEndpoint": "${serviceConnectionId}",
                "azureContainerRegistry": "{\"loginServer\":\"${registryAddress}\", \"id\" : \"${resourceGroupId}\"}",
                "command": "Push an image",
                "dockerFile": "**/Dockerfile",
                "arguments": "",
                "useDefaultContext": "true",
                "buildContext": "",
                "pushMultipleImages": "false",
                "tagMultipleImages": "false",
                "imageName": "${imageName}:$(Build.BuildId)",
                "imageNamesPath": "",
                "qualifyImageName": "true",
                "includeSourceTags": "false",
                "includeLatestTag": "false",
                "imageDigestFile": "",
                "containerName": "",
                "ports": "",
                "volumes": "",
                "envVars": "",
                "workingDirectory": "",
                "entrypointOverride": "",
                "containerCommand": "",
                "runInBackground": "true",
                "restartPolicy": "no",
                "maxRestartRetries": "",
                "dockerHostEndpoint": "",
                "enforceDockerNamingConvention": "true",
                "memoryLimit": ""
              }
            }
          ],
          "name": null,
          "refName": "Phase_1",
          "target": {
            "executionOptions": null,
            "allowScriptsAuthAccessOption": false,
            "type": 1
          },
          "jobAuthorizationScope": 0
        }
      ],
      "type": 1
    },
    "repository": {
        "properties": {
          "apiUrl": "https://api.github.com/repos/${gitOrg}/${gitRepo}",
          "branchesUrl": "https://api.github.com/repos/${gitOrg}/${gitRepo}/branches",
          "cloneUrl": "https://github.com/${gitOrg}/${gitRepo}.git",
          "connectedServiceId": "${gitServiceConnectionId}",
          "defaultBranch": "master",
          "fullName": "${gitOrg}/${gitRepo}",
          "refsUrl": "https://api.github.com/repos/${gitOrg}/${gitRepo}/git/refs",
          "fetchDepth": "0",
          "labelSources": "0"
        },
        "id": "${gitOrg}/${gitRepo}",
        "type": "GitHub",
        "name": "${gitOrg}/${gitRepo}",
        "url": "https://github.com/${gitOrg}/${gitRepo}.git",
        "defaultBranch": "master",
        "clean": "false",
        "checkoutSubmodules": false
    },
    "quality": "definition",
    "queue": {
      "_links": {
        "self": {
          "href": "https://dev.azure.com/${orgName}/_apis/build/Queues/"
        }
      },
      "name": "Hosted Ubuntu 1604",
      "url": "https://dev.azure.com/${orgName}/_apis/build/Queues/",
      "pool": {
        "name": "Hosted Ubuntu 1604",
        "isHosted": true
      }
    },
    "name": "${pipelineName}",
    "path": "\\",
    "type": "build",
    "queueStatus": "enabled",
    "revision": 1,
    "project": {
      "id": "${projectId}",
      "name": "${projectName}",
      "url": "https://dev.azure.com/${orgName}/_apis/projects/${projectId}",
      "state": "wellFormed",
      "revision": 83,
      "visibility": "private"
    }
  }
  